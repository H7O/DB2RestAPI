<settings>
  <routes>

    <cat_facts>
      <url>https://catfact.ninja/fact</url>
      <excluded_headers>x-api-key,host</excluded_headers>
    </cat_facts>

    <hello_world_routed>
      <url>https://localhost:7054/hello_world</url>
      <excluded_headers>x-api-key,host</excluded_headers>
      <ignore_target_route_certificate_errors>true</ignore_target_route_certificate_errors>
    </hello_world_routed>

    <!-- 
    adds API Keys protection to to the unprotected `catfact.ninja/fact` API
    before routing
    -->
    <locally_protected_cat_facts>
      <api_keys>
        <key>local api key 1</key>
        <key>local api key 2</key>
      </api_keys>

      <url>https://catfact.ninja/fact</url>
      <excluded_headers>x-api-key,host</excluded_headers>

    </locally_protected_cat_facts>

    <!-- 
    calls the already protected `protected_hello_world` API and passes the `x-api-key`
    coming from the client request back to the API without doing 
    any API keys protection of its own upfront and relying
    on the protection of the `protected_hello_world` API
    -->
    <remote_protected_hello_world_routed>
      
      <url>https://localhost:7054/protected_hello_world</url>
      <excluded_headers>host</excluded_headers>
      <ignore_target_route_certificate_errors>true</ignore_target_route_certificate_errors>
      <applied_headers>
        <header>
          <name>x-api-key</name>
          <value>api key 1</value>
        </header>
      </applied_headers>
    </remote_protected_hello_world_routed>


    <!-- 
    callers to this API will use the path `cat/facts` (e.g., https://localhost:7054/cat/facts)
    will get routed to the `https://catfact.ninja/fact` API.
    -->
    <cat_facts_custom_path_example>
      <path>cat/facts</path>
      <url>https://catfact.ninja/fact</url>
      <excluded_headers>x-api-key,host</excluded_headers>
    </cat_facts_custom_path_example>

    <!-- 
    if no path is specified, the path will be the node name. 
    callers to this API will use the path `cat_facts` (e.g., https://localhost:7054/cat_facts)
    will get routed to the `https://catfact.ninja/fact` API.
    -->
    <cat_facts>
      <url>https://catfact.ninja/fact</url>
      <excluded_headers>x-api-key,host</excluded_headers>
    </cat_facts>

    <!-- 
    note: I'm trying to decide whether to use * from wildcard path or just the slash at the end (i.e., `cat/facts/`) 
    is sufficient to denote a wildcard path.

    I.e., should the path be `cat/facts/*` or just `cat/facts/`?
    or something else entirely, like having a `wildcard_path` element? e.g., <wildcard_path>true</wildcard_path>

    I'm leaning towards just using the slash at the end of the path, because it's more readable and easier to understand.

    The remaining path after the wildcard is appended to the target URL. e.g., if the caller uses the path `cat/facts/123`,
    the remaining path after the wildcard will be `123` and will be appended to the target URL making the final request URL
    https://catfact.ninja/fact/123.
    -->
    <cat_facts_wildcard_path_example>
      <path>cat/facts/*</path>
      <url>https://catfact.ninja/fact</url>
      <excluded_headers>x-api-key,host</excluded_headers>
    </cat_facts_wildcard_path_example>


    <!-- 
    This showcases how to use a verb.
    The verb is the HTTP verb that will be used to route the request.
    If the caller uses a different verb, the request will be rejected.
    -->
    <cat_facts_verb_example>
      <path>cat/facts</path>
      <verb>post</verb>
      <url>https://catfact.ninja/fact</url>
      <excluded_headers>x-api-key,host</excluded_headers>
    </cat_facts_verb_example>


    <cat_facts_wildcard_path_example>
      <path>cat/facts/*</path>
      <url>https://catfact.ninja/fact</url>
      <excluded_headers>x-api-key,host</excluded_headers>
      <applied_headers>
        <header>
          <name>x-api-key</name>
          <value>api key 1</value>
        </header>
      </applied_headers>

    </cat_facts_wildcard_path_example>

    <cat_facts_verb_example>
      <path>cat/facts</path>
      <verb>post</verb>
      <url>https://catfact.ninja/fact/add</url>
      <excluded_headers>x-api-key,host</excluded_headers>
    </cat_facts_verb_example>

    <cat_facts_verb_example>
      <path>cat/facts</path>
      <verb>get</verb>
      <url>https://catfact.ninja/fact/list_all_facts</url>
      <excluded_headers>x-api-key,host</excluded_headers>
    </cat_facts_verb_example>



  </routes>
</settings>